###############################
model_results <- lapply(file_paths, function(i) {
try({
filename <- list.files(path = i, pattern = "results")
filename <- paste0(i, filename)
df <- fread(filename) %>% as.data.frame() %>%
dplyr::filter(`Association type` != "Not-associated") %>%
dplyr::select('Gene name') %>% as.list() %>% unlist() %>% as.list() %>%
unique() %>% unlist()
return(df)
})
})
names(model_results) <- sapply(str_split(file_paths, "/"), `[[`, 4)
model_results <- model_results[c(1,2,4,5)]
ggvenn(model_results, set_name_size = 2)
library(data.table)
library(tidyverse)
library(dplyr)
library(ggvenn)
library(stringr)
input_file_name <- commandArgs(trailingOnly = TRUE)[1]
input_file_name <- "als"
input_file_path <-
paste0(
"data/01_data_input/03_dglinker_results/",
input_file_name)
file_paths <-
list.dirs(path = input_file_path,
full.names = TRUE,
recursive = FALSE) %>%
paste0("/model_results/")
i <- file_paths[1]
model_results <- lapply(file_paths, function(i) {
try({
filename <- list.files(path = i, pattern = "model_performance")
filename <- paste0(i, filename)
df <- fread(filename) %>% as.data.frame()
return(df)
})
})
model_results
rbind(model_results)
model_results <- lapply(file_paths, function(i) {
try({
filename <- list.files(path = i, pattern = "model_performance")
filename <- paste0(i, filename)
df <- fread(filename) %>% as.data.frame()
df$model <- i
return(df)
})
})
bind_rows(model_results, .id = "V1")
model_results
bind_rows(model_results, .id = "V1")
do.call("cbind", model_results)
df <- do.call("cbind", model_results)
View(df)
model_results <- lapply(file_paths, function(i) {
try({
filename <- list.files(path = i, pattern = "model_performance")
filename <- paste0(i, filename)
df <- fread(filename) %>% as.data.frame()
colname(df)[2] <- i
return(df)
})
})
df <- do.call("cbind", model_results)
model_results <- lapply(file_paths, function(i) {
try({
filename <- list.files(path = i, pattern = "model_performance")
filename <- paste0(i, filename)
df <- fread(filename) %>% as.data.frame()
colnames(df)[2] <- i
return(df)
})
})
df <- do.call("cbind", model_results)
model_results <- do.call("cbind", model_results)
colnames(model_results)[1] <- "metric"
colnames(model_results)[1]
colnames(model_results)
model_results <- model_results[, colnames(model_results != "V1")]
model_results
file_paths <-
list.dirs(path = input_file_path,
full.names = FALSE,
recursive = FALSE)
library(data.table)
library(tidyverse)
library(dplyr)
library(ggvenn)
library(stringr)
input_file_name <- commandArgs(trailingOnly = TRUE)[1]
input_file_name <- "als"
input_file_path <-
paste0(
"data/01_data_input/03_dglinker_results/",
input_file_name)
file_paths <-
list.dirs(path = input_file_path,
full.names = FALSE,
recursive = FALSE)
i <- file_paths[1]
model_results <- lapply(file_paths, function(i) {
try({
file_path <- paste0(
input_file_path,
i,
"/model_results/"
)
filename <- list.files(path = i, pattern = "model_performance")
filename <- paste0(i, filename)
df <- fread(filename) %>% as.data.frame()
colnames(df)[2] <- i
return(df)
})
})
model_results <- lapply(file_paths, function(i) {
try({
file_path <- paste0(
input_file_path,
i,
"/model_results/"
)
filename <- list.files(path = file_path, pattern = "model_performance")
filename <- paste0(i, filename)
df <- fread(filename) %>% as.data.frame()
colnames(df)[2] <- i
return(df)
})
})
file_path <- paste0(
input_file_path,
i,
"/model_results/"
)
file_path
library(data.table)
library(tidyverse)
library(dplyr)
library(ggvenn)
library(stringr)
input_file_name <- commandArgs(trailingOnly = TRUE)[1]
input_file_name <- "als"
input_file_path <-
paste0(
"data/01_data_input/03_dglinker_results/",
input_file_name, "/")
file_paths <-
list.dirs(path = input_file_path,
full.names = FALSE,
recursive = FALSE)
i <- file_paths[1]
model_results <- lapply(file_paths, function(i) {
try({
file_path <- paste0(
input_file_path,
i,
"/model_results/"
)
filename <- list.files(path = file_path, pattern = "model_performance")
filename <- paste0(i, filename)
df <- fread(filename) %>% as.data.frame()
colnames(df)[2] <- i
return(df)
})
})
file_path <- paste0(
input_file_path,
i,
"/model_results/"
)
file_path
filename <- list.files(path = file_path, pattern = "model_performance")
filename <- paste0(file_path, filename)
df <- fread(filename) %>% as.data.frame()
library(data.table)
library(tidyverse)
library(dplyr)
library(ggvenn)
library(stringr)
input_file_name <- commandArgs(trailingOnly = TRUE)[1]
input_file_name <- "als"
input_file_path <-
paste0(
"data/01_data_input/03_dglinker_results/",
input_file_name, "/")
file_paths <-
list.dirs(path = input_file_path,
full.names = FALSE,
recursive = FALSE)
i <- file_paths[1]
model_results <- lapply(file_paths, function(i) {
try({
file_path <- paste0(
input_file_path,
i,
"/model_results/"
)
filename <- list.files(path = file_path, pattern = "model_performance")
filename <- paste0(file_path, filename)
df <- fread(filename) %>% as.data.frame()
colnames(df)[2] <- i
return(df)
})
})
model_results <- do.call("cbind", model_results)
colnames(model_results)[1] <- "metric"
model_results <- model_results[, colnames(model_results != "V1")]
model_results
grep(model_results, "V1")
grep("V1", model_results)
grep("V1", colnames(model_results))
grepl("V1", colnames(model_results))
model_results <- model_results[, colnames(!grepl("V1", colnames(model_results)))]
model_results
model_results <- lapply(file_paths, function(i) {
try({
file_path <- paste0(
input_file_path,
i,
"/model_results/"
)
filename <- list.files(path = file_path, pattern = "model_performance")
filename <- paste0(file_path, filename)
df <- fread(filename) %>% as.data.frame()
colnames(df)[2] <- i
return(df)
})
})
model_results <- do.call("cbind", model_results)
colnames(model_results)[1] <- "metric"
model_results <- model_results[, colnames(!grepl("V1", colnames(model_results)))]
model_results
model_results <- lapply(file_paths, function(i) {
try({
file_path <- paste0(
input_file_path,
i,
"/model_results/"
)
filename <- list.files(path = file_path, pattern = "model_performance")
filename <- paste0(file_path, filename)
df <- fread(filename) %>% as.data.frame()
colnames(df)[2] <- i
return(df)
})
})
model_results <- do.call("cbind", model_results)
colnames(model_results)[1] <- "metric"
model_results <- model_results[, !grepl("V1", colnames(model_results))]
model_results
output_file_path <-
paste0(
"data/03_dglinker_results_analysis/01_model_results/",
input_file_name, "/")
output_file_path
dir.create(output_file_path, showWarnings = FALSE, recursive = TRUE)
fwrite(model_results,
paste0(output_file_path, "model_summary.csv"),
row.names = FALSE)
library(data.table)
library(tidyverse)
library(dplyr)
library(ggvenn)
library(stringr)
input_file_name <- commandArgs(trailingOnly = TRUE)[1]
input_file_name <- "als"
input_file_path <-
paste0("data/01_data_input/03_dglinker_results/",
input_file_name,
"/")
model_summary_file_path <-
paste0("data/03_dglinker_results_analysis/01_model_results/",
input_file_name,
"/")
model_results <- fread(paste0(model_summary_file_path, "model_summary.csv"),
row.names = FALSE)
model_results <- fread(paste0(model_summary_file_path, "model_summary.csv"))
model_results
model_results["AUC of the Model", ]
model_results <-
fread(paste0(model_summary_file_path, "model_summary.csv")) %>%
as.data.frame()
best_model <- model_results["AUC of the Model",]
best_model
model_results
model_results[model_results$metric == "AUC of the Model", ]
max(model_results[model_results$metric == "AUC of the Model", ])
best_model <- max(model_results[model_results$metric == "AUC of the Model", -c("metric")])
model_results <-
fread(paste0(model_summary_file_path, "model_summary.csv")) %>%
as.data.frame() %>%
column_to_rownames(var = "metric")
best_model <-
max(model_results[row.names(model_results) == "AUC of the Model", ])
best_model
library(data.table)
library(tidyverse)
library(dplyr)
library(ggvenn)
library(stringr)
input_file_name <- commandArgs(trailingOnly = TRUE)[1]
input_file_name <- "als"
input_file_path <-
paste0("data/01_data_input/03_dglinker_results/",
input_file_name,
"/")
model_summary_file_path <-
paste0("data/03_dglinker_results_analysis/01_model_results/",
input_file_name,
"/")
model_results <-
fread(paste0(model_summary_file_path, "model_summary.csv")) %>%
as.data.frame() %>%
column_to_rownames(var = "metric")
best_model <-
colnames(model_results)[max.col(model_results[row.names(model_results) == "AUC of the Model", ])]
best_model
input_file_path <-
paste0(input_file_path, best_model, "/model_results/")
input_file_path
list.files(input_file_path)
list.files(input_file_path, pattern = "model_performance")
library(data.table)
library(tidyverse)
library(dplyr)
library(ggvenn)
library(stringr)
input_file_name <- commandArgs(trailingOnly = TRUE)[1]
input_file_name <- "als"
input_file_path <-
paste0("data/01_data_input/03_dglinker_results/",
input_file_name,
"/")
model_summary_file_path <-
paste0("data/03_dglinker_results_analysis/01_model_results/",
input_file_name,
"/")
model_results <-
fread(paste0(model_summary_file_path, "model_summary.csv")) %>%
as.data.frame() %>%
column_to_rownames(var = "metric")
best_model <-
colnames(model_results)[max.col(model_results[row.names(model_results) == "AUC of the Model", ])]
input_file_path <-
paste0(input_file_path, best_model, "/model_results/")
input_file_name <- list.files(input_file_path, pattern = "model_performance")
df <- fread(input_file_name) %>% as.data.frame() %>%
dplyr::filter(`Association type` != "Not-associated") %>%
dplyr::select('Gene name') %>% as.list() %>% unlist() %>% as.list() %>%
unique() %>% unlist()
library(data.table)
library(tidyverse)
library(dplyr)
library(ggvenn)
library(stringr)
input_file_name <- commandArgs(trailingOnly = TRUE)[1]
input_file_name <- "als"
input_file_path <-
paste0("data/01_data_input/03_dglinker_results/",
input_file_name,
"/")
model_summary_file_path <-
paste0("data/03_dglinker_results_analysis/01_model_results/",
input_file_name,
"/")
model_results <-
fread(paste0(model_summary_file_path, "model_summary.csv")) %>%
as.data.frame() %>%
column_to_rownames(var = "metric")
best_model <-
colnames(model_results)[max.col(model_results[row.names(model_results) == "AUC of the Model",])]
input_file_path <-
paste0(input_file_path, best_model, "/model_results/")
input_file_path <-
paste0(input_file_path,
list.files(input_file_path, pattern = "model_performance"))
df <- fread(input_file_path) %>% as.data.frame() %>%
dplyr::filter(`Association type` != "Not-associated") %>%
dplyr::select('Gene name') %>% as.list() %>% unlist() %>% as.list() %>%
unique() %>% unlist()
input_file_path
library(data.table)
library(tidyverse)
library(dplyr)
library(ggvenn)
library(stringr)
input_file_name <- commandArgs(trailingOnly = TRUE)[1]
input_file_name <- "als"
input_file_path <-
paste0("data/01_data_input/03_dglinker_results/",
input_file_name,
"/")
model_summary_file_path <-
paste0("data/03_dglinker_results_analysis/01_model_results/",
input_file_name,
"/")
model_results <-
fread(paste0(model_summary_file_path, "model_summary.csv")) %>%
as.data.frame() %>%
column_to_rownames(var = "metric")
best_model <-
colnames(model_results)[max.col(model_results[row.names(model_results) == "AUC of the Model",])]
input_file_path <-
paste0(input_file_path, best_model, "/model_results/")
input_file_path <-
paste0(input_file_path,
list.files(input_file_path, pattern = "results"))
df <- fread(input_file_path) %>% as.data.frame() %>%
dplyr::filter(`Association type` != "Not-associated") %>%
dplyr::select('Gene name') %>% as.list() %>% unlist() %>% as.list() %>%
unique() %>% unlist()
df
dir.create(output_file_path, showWarnings = FALSE, recursive = TRUE)
library(data.table)
library(tidyverse)
library(dplyr)
library(ggvenn)
library(stringr)
input_file_name <- commandArgs(trailingOnly = TRUE)[1]
input_file_name <- "als"
input_file_path <-
paste0("data/01_data_input/03_dglinker_results/",
input_file_name,
"/")
output_file_path <-
paste0("data/03_dglinker_results_analysis/02_dglinker_gene_list/",
input_file_name,
"/")
model_summary_file_path <-
paste0("data/03_dglinker_results_analysis/01_model_results/",
input_file_name,
"/")
model_results <-
fread(paste0(model_summary_file_path, "model_summary.csv")) %>%
as.data.frame() %>%
column_to_rownames(var = "metric")
best_model <-
colnames(model_results)[max.col(model_results[row.names(model_results) == "AUC of the Model", ])]
input_file_path <-
paste0(input_file_path, best_model, "/model_results/")
input_file_path <-
paste0(input_file_path,
list.files(input_file_path, pattern = "results"))
df <- fread(input_file_path) %>% as.data.frame() %>%
dplyr::filter(`Association type` != "Not-associated") %>%
dplyr::select('Gene name') %>% as.list() %>% unlist() %>% as.list() %>%
unique() %>% unlist()
dir.create(output_file_path,
showWarnings = FALSE,
recursive = TRUE)
frwite(df,
paste0(output_file_path, "dglinker_gene_list.csv", row.names = FALSE))
fwrite(df,
paste0(output_file_path, "dglinker_gene_list.csv", row.names = FALSE))
df
fwrite(df,
paste0(output_file_path, "dglinker_gene_list.csv"))
df <- fread(input_file_path) %>% as.data.frame() %>%
dplyr::filter(`Association type` != "Not-associated") %>%
dplyr::select('Gene name') %>% as.list() %>% unlist() %>% as.list() %>%
unique() %>% unlist() %>%
as.list()
dir.create(output_file_path,
showWarnings = FALSE,
recursive = TRUE)
fwrite(df,
paste0(output_file_path, "dglinker_gene_list.csv"))
df
df <- fread(input_file_path) %>% as.data.frame() %>%
dplyr::filter(`Association type` != "Not-associated") %>%
dplyr::select('Gene name') %>% as.list() %>% unlist() %>% as.list() %>%
unique() %>% unlist()
fwrite(df,
paste0(output_file_path, "dglinker_gene_list.csv"))
write.csv(df,
paste0(output_file_path, "dglinker_gene_list.csv"))
df <- fread(input_file_path) %>% as.data.frame() %>%
dplyr::filter(`Association type` != "Not-associated") %>%
dplyr::select('Gene name') %>% as.list() %>% unlist() %>% as.list() %>%
unique() %>% unlist() %>%
as.data.frame()
df
df <- fread(input_file_path) %>% as.data.frame() %>%
dplyr::filter(`Association type` != "Not-associated") %>%
dplyr::select('Gene name') %>% as.list() %>% unlist() %>% as.list() %>%
unique() %>% unlist() %>%
as.data.frame()
dir.create(output_file_path,
showWarnings = FALSE,
recursive = TRUE)
fwrite(
df,
paste0(output_file_path, "dglinker_gene_list.csv"),
row.names = FALSE,
col.names = FALSE
)
df <- fread(input_file_path) %>% as.data.frame() %>%
dplyr::filter(`Association type` != "Not-associated") %>%
dplyr::select('Gene name') %>% as.list() %>% unlist() %>% as.list() %>%
unique() %>% unlist() %>%
as.data.frame()
dir.create(output_file_path,
showWarnings = FALSE,
recursive = TRUE)
fwrite(
df,
paste0(output_file_path, "dglinker_gene_list.csv"),
row.names = FALSE,
col.names = FALSE
)
